"use strict";(()=>{var l=(t,e,s)=>new Promise((r,a)=>{var d=n=>{try{o(s.next(n))}catch(c){a(c)}},g=n=>{try{o(s.throw(n))}catch(c){a(c)}},o=n=>n.done?r(n.value):Promise.resolve(n.value).then(d,g);o((s=s.apply(t,e)).next())});var i=globalThis.self,w=t=>t==null?[]:[t],u=(t,e,s="all")=>l(void 0,null,function*(){let r=s==="all"?yield i.clients.matchAll({}):w(yield i.clients.get(s));for(let a of r)a.postMessage({type:t,contents:e})}),f={info:(t="no msg",e="all")=>u("info",t,e),error:(t="no msg",e="all")=>u("error",t,e)};i.addEventListener("install",t=>{t.waitUntil(Promise.all([i.skipWaiting()]))});i.addEventListener("activate",t=>{t.waitUntil((()=>l(void 0,null,function*(){yield i.clients.claim(),yield f.info("{\u{1F4E5} install} new script installed"),yield f.info("{\u{1F525} activate} new script in control")}))())});i.addEventListener("fetch",t=>{t.respondWith((()=>l(void 0,null,function*(){let e=yield caches.match(t.request);return f.info(`recieved client ${t.clientId} request for ${t.request.url}, cache_hit=${!!e}, status=${(e==null?void 0:e.status)||"no_status"}`,t.clientId),e||fetch(t.request)}))())});})();
